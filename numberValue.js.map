{"version":3,"sources":["../src/numberValue.js"],"names":["bindingHandlers","numberValue","init","element","valueAccessor","input","isObservable","console","warn","onChange","log","value","valueArray","split","map","speed","index","length","parseInt","i","item","observable","push","addEventListener","utils","domNodeDisposal","addDisposeCallback","removeEventListener","update","speeds","speedString","join"],"mappings":";;AAAA;;;;;;AAEA;;;;;AAKI,mBAAGA,eAAH,CAAmBC,WAAnB,GAAiC;AAC7BC,UAAM,cAAUC,OAAV,EAAmBC,aAAnB,EAAiC;AACnC,YAAIC,QAAQD,eAAZ;;AAEA;AACA,YAAG,CAAC,mBAAGE,YAAH,CAAgBD,KAAhB,CAAJ,EAA4B;AACxBE,oBAAQC,IAAR,CAAa,4BAAb;AACA;AACH;;AAED;AACA,iBAASC,QAAT,GAAqB;AACjBF,oBAAQG,GAAR,CAAY,aAAZ,EAA2BP,QAAQQ,KAAnC;AACA,gBAAIC,aAAaT,QAAQQ,KAAR,CAAcE,KAAd,CAAoB,GAApB,CAAjB;;AAEAR,oBAAQS,GAAR,CAAY,UAAUC,KAAV,EAAiBC,KAAjB,EAAuB;AAC/B,oBAAIA,QAAQJ,WAAWK,MAAnB,IAA6BC,SAASN,WAAWI,KAAX,CAAT,IAA8B,CAA9B,KAAoC,CAArE,EAAuE;AACnED,0BAAMJ,KAAN,CAAYO,SAASN,WAAWI,KAAX,CAAT,EAA4B,EAA5B,CAAZ;AACH,iBAFD,MAEO;AACHD,0BAAMJ,KAAN,CAAYO,SAASN,WAAWA,WAAWK,MAAX,GAAoB,CAA/B,CAAT,EAA4C,EAA5C,CAAZ;AACH;AACJ,aAND;;AAQA,gBAAIL,WAAWK,MAAX,GAAoBZ,QAAQY,MAAhC,EAAuC;AACnC,qBAAK,IAAIE,IAAId,QAAQY,MAArB,EAA6BE,IAAIP,WAAWK,MAA5C,EAAoDE,GAApD,EAAwD;AACpD,wBAAID,SAASN,WAAWO,CAAX,CAAT,IAA0B,CAA1B,KAAgC,CAApC,EAAuC;AACnC,4BAAIC,OAAO;AACXT,mCAAO,mBAAGU,UAAH,CAAcH,SAASN,WAAWO,CAAX,CAAT,EAAwB,EAAxB,CAAd;AADI,yBAAX;AAGAd,8BAAMiB,IAAN,CAAWF,IAAX;AACAb,gCAAQG,GAAR,CAAYU,KAAKT,KAAjB,EAAwBN,OAAxB;AACH;AACJ;AACJ;AACJ;AACDF,gBAAQoB,gBAAR,CAAyB,QAAzB,EAAmCd,QAAnC;;AAEA;AACA,2BAAGe,KAAH,CAASC,eAAT,CAAyBC,kBAAzB,CAA4CvB,OAA5C,EAAqD,YAAW;AAC5DA,oBAAQwB,mBAAR,CAA4B,QAA5B,EAAsClB,QAAtC;AACH,SAFD;AAGH,KAzC4B;AA0C7BmB,YAAQ,gBAASzB,OAAT,EAAkBC,aAAlB,EAAgC;AACpC,YAAIC,QAAQD,eAAZ;AACA,YAAIyB,SAASxB,QAAQS,GAAR,CAAY,UAASC,KAAT,EAAe;AACpC,mBAAOA,MAAMJ,KAAN,EAAP;AACH,SAFY,CAAb;AAGA,YAAImB,cAAcD,OAAOE,IAAP,CAAY,GAAZ,CAAlB;;AAEA;AACA5B,gBAAQQ,KAAR,GAAgBmB,WAAhB;AACH;AAnD4B,CAAjC","file":"numberValue.js","sourcesContent":["import ko from 'knockout';\n\n/**\n * TODO - description\n * @module numberValue\n */\n\n    ko.bindingHandlers.numberValue = {\n        init: function (element, valueAccessor){\n            var input = valueAccessor();\n\n            // if input is not an observable, throw warning\n            if(!ko.isObservable(input)) {\n                console.warn('Input is not an observable');\n                return;\n            }\n\n            // handles user input and updates input observable\n            function onChange () {\n                console.log('New value: ', element.value);\n                var valueArray = element.value.split(',');\n\n                input().map(function (speed, index){\n                    if (index < valueArray.length && parseInt(valueArray[index]) % 1 === 0){\n                        speed.value(parseInt(valueArray[index], 10));\n                    } else {\n                        speed.value(parseInt(valueArray[valueArray.length - 1], 10));\n                    }\n                });\n\n                if (valueArray.length > input().length){\n                    for (var i = input().length; i < valueArray.length; i++){\n                        if (parseInt(valueArray[i]) % 1 === 0) {\n                            var item = {\n                            value: ko.observable(parseInt(valueArray[i], 10))\n                            };\n                            input.push(item);\n                            console.log(item.value, input());\n                        }\n                    }\n                }\n            }\n            element.addEventListener('change', onChange);\n\n            // on dom node disposal, removes the onChange listener\n            ko.utils.domNodeDisposal.addDisposeCallback(element, function() {\n                element.removeEventListener('change', onChange);\n            });\n        },\n        update: function(element, valueAccessor){\n            var input = valueAccessor()\n            var speeds = input().map(function(speed){\n                return speed.value();\n            });\n            var speedString = speeds.join(',');\n\n            // sets the value of the element to be the value of input\n            element.value = speedString;\n        }\n    }\n"]}