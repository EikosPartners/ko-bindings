{"version":3,"sources":["../src/timepicker.js"],"names":["bindingHandlers","timepicker","init","element","valueAccessor","options","data","format","picker","time","isObservable","toDate","on","newValue","isValid","subscribe","newTime","outerWidth"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEA,mBAAGA,eAAH,CAAmBC,UAAnB,GAAgC;AAC5BC,UAAM,cAAUC,OAAV,EAAmBC,aAAnB,EAAkC;AACpC,YAAIC,UAAUD,eAAd;AACA,YAAIE,OAAOD,QAAQC,IAAnB;AACA,YAAIC,SAASF,QAAQE,MAAR,IAAkB,EAA/B;AACA,YAAIC,SAAS,sBAAEL,OAAF,EAAWF,UAAX,CAAsBI,OAAtB,CAAb;AACA,YAAII,IAAJ;;AAEA,YAAI,mBAAGC,YAAH,CAAgBJ,IAAhB,CAAJ,EAA2B;AACvB;AACA,gBAAIA,MAAJ,EAAY;AACR,sCAAEH,OAAF,EAAWF,UAAX,CAAsB,SAAtB,EAAiC,sBAAOK,MAAP,EAAeC,MAAf,EAAuBI,MAAvB,EAAjC;AACH,aAFD,MAEO;AACHF,uBAAO,sBAAEN,OAAF,EAAWF,UAAX,CAAsB,SAAtB,CAAP,CADG,CACsC;AACzC,oBAAIQ,IAAJ,EAAU;AACNH,yBAAK,sBAAOG,IAAP,EAAaF,MAAb,CAAoBA,MAApB,CAAL;AACH;AACJ;;AAEDC,mBAAOI,EAAP,CAAU,QAAV,EAAoB,YAAY;AAC5B,oBAAIC,WAAW,sBAAO,sBAAEV,OAAF,EAAWF,UAAX,CAAsB,SAAtB,CAAP,CAAf;AACA,oBAAGY,SAASC,OAAT,EAAH,EAAuB;AACnBR,yBAAKO,SAASN,MAAT,CAAgBA,MAAhB,CAAL;AACH,iBAFD,MAEO;AACHD,yBAAK,EAAL;AACH;AACJ,aAPD;AAQAA,iBAAKS,SAAL,CAAe,UAAUC,OAAV,EAAmB;AAC9B,sCAAEb,OAAF,EAAWF,UAAX,CAAsB,SAAtB,EAAiC,sBAAOe,OAAP,EAAgBT,MAAhB,EAAwBI,MAAxB,EAAjC;AACH,aAFD;AAGH,SAtBD,MAsBO,IAAIL,IAAJ,EAAU;AACb,kCAAEH,OAAF,EAAWF,UAAX,CAAsB,SAAtB,EAAiC,sBAAOK,IAAP,EAAaC,MAAb,EAAqBI,MAArB,EAAjC;AACH;;AAEDH,eAAOI,EAAP,CAAU,gBAAV,EAA4B,YAAW;AACnC,kCAAE,wBAAF,EAA4BK,UAA5B,CAAuC,sBAAEd,OAAF,EAAWc,UAAX,EAAvC;AACH,SAFD;AAIH;AAtC2B,CAAhC","file":"timepicker.js","sourcesContent":["import ko from 'knockout';\r\nimport $ from 'jquery';\r\nimport moment from 'moment';\r\nimport 'timepicker';\r\nimport 'timepicker/jquery.timepicker.min.css';\r\n\r\nko.bindingHandlers.timepicker = {\r\n    init: function (element, valueAccessor) {\r\n        var options = valueAccessor();\r\n        var data = options.data;\r\n        var format = options.format || '';\r\n        var picker = $(element).timepicker(options);\r\n        var time;\r\n\r\n        if (ko.isObservable(data)) {\r\n            //set initial values\r\n            if (data()) {\r\n                $(element).timepicker('setTime', moment(data(), format).toDate());\r\n            } else {\r\n                time = $(element).timepicker('getTime'); // Does this ever return a value?\r\n                if (time) {\r\n                    data(moment(time).format(format));\r\n                }\r\n            }\r\n\r\n            picker.on('change', function () {\r\n                let newValue = moment($(element).timepicker('getTime'));\r\n                if(newValue.isValid()) {\r\n                    data(newValue.format(format));\r\n                } else {\r\n                    data('');\r\n                }\r\n            });\r\n            data.subscribe(function (newTime) {\r\n                $(element).timepicker('setTime', moment(newTime, format).toDate());\r\n            });\r\n        } else if (data) {\r\n            $(element).timepicker('setTime', moment(data, format).toDate());\r\n        }\r\n\r\n        picker.on('showTimepicker', function() {\r\n            $('.ui-timepicker-wrapper').outerWidth($(element).outerWidth());\r\n        })\r\n\r\n    }\r\n};\r\n"]}