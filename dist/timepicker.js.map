{"version":3,"sources":["../src/timepicker.js"],"names":["bindingHandlers","timepicker","init","element","valueAccessor","options","data","format","picker","m","time","utc","isObservable","toDate","on","newValue","isValid","subscribe","newTime","outerWidth"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEA,mBAAGA,eAAH,CAAmBC,UAAnB,GAAgC;AAC5BC,UAAM,cAAUC,OAAV,EAAmBC,aAAnB,EAAkC;AACpC,YAAMC,UAAUD,eAAhB;AACA,YAAME,OAAOD,QAAQC,IAArB;AACA,YAAMC,SAASF,QAAQE,MAAR,IAAkB,EAAjC;AACA,YAAMC,SAAS,sBAAEL,OAAF,EAAWF,UAAX,CAAsBI,OAAtB,CAAf;AACA,YAAII,oBAAJ;AAAA,YACIC,aADJ;;AAIA,YAAIL,QAAQM,GAAZ,EAAiB;AACbF,gBAAIA,EAAEE,GAAN;AACH;;AAED,YAAI,mBAAGC,YAAH,CAAgBN,IAAhB,CAAJ,EAA2B;AACvB;AACA,gBAAIA,MAAJ,EAAY;AACR,sCAAEH,OAAF,EAAWF,UAAX,CAAsB,SAAtB,EAAiCQ,EAAEH,MAAF,EAAUC,MAAV,EAAkBM,MAAlB,EAAjC;AACH,aAFD,MAEO;AACHH,uBAAO,sBAAEP,OAAF,EAAWF,UAAX,CAAsB,SAAtB,CAAP,CADG,CACsC;AACzC,oBAAIS,IAAJ,EAAU;AACNJ,yBAAKG,EAAEC,IAAF,EAAQH,MAAR,CAAeA,MAAf,CAAL;AACH;AACJ;;AAEDC,mBAAOM,EAAP,CAAU,QAAV,EAAoB,YAAY;AAC5B,oBAAIC,WAAWN,EAAE,sBAAEN,OAAF,EAAWF,UAAX,CAAsB,SAAtB,CAAF,CAAf;;AAEA,oBAAGc,SAASC,OAAT,EAAH,EAAuB;AACnBV,yBAAKS,SAASR,MAAT,CAAgBA,MAAhB,CAAL;AACH,iBAFD,MAEO;AACHD,yBAAK,EAAL;AACH;AACJ,aARD;AASAA,iBAAKW,SAAL,CAAe,UAAUC,OAAV,EAAmB;AAC9B,sCAAEf,OAAF,EAAWF,UAAX,CAAsB,SAAtB,EAAiCQ,EAAES,OAAF,EAAWX,MAAX,EAAmBM,MAAnB,EAAjC;AACH,aAFD;AAGH,SAvBD,MAuBO,IAAIP,IAAJ,EAAU;AACb,kCAAEH,OAAF,EAAWF,UAAX,CAAsB,SAAtB,EAAiCQ,EAAEH,IAAF,EAAQC,MAAR,EAAgBM,MAAhB,EAAjC;AACH;;AAEDL,eAAOM,EAAP,CAAU,gBAAV,EAA4B,YAAW;AACnC,kCAAE,wBAAF,EAA4BK,UAA5B,CAAuC,sBAAEhB,OAAF,EAAWgB,UAAX,EAAvC;AACH,SAFD;AAIH;AA7C2B,CAAhC","file":"timepicker.js","sourcesContent":["import ko from 'knockout';\r\nimport $ from 'jquery';\r\nimport moment from 'moment';\r\nimport 'timepicker';\r\nimport 'timepicker/jquery.timepicker.min.css';\r\n\r\nko.bindingHandlers.timepicker = {\r\n    init: function (element, valueAccessor) {\r\n        const options = valueAccessor();\r\n        const data = options.data;\r\n        const format = options.format || '';\r\n        const picker = $(element).timepicker(options);\r\n        let m = moment,\r\n            time;\r\n\r\n\r\n        if (options.utc) {\r\n            m = m.utc;\r\n        }\r\n\r\n        if (ko.isObservable(data)) {\r\n            //set initial values\r\n            if (data()) {\r\n                $(element).timepicker('setTime', m(data(), format).toDate());\r\n            } else {\r\n                time = $(element).timepicker('getTime'); // Does this ever return a value?\r\n                if (time) {\r\n                    data(m(time).format(format));\r\n                }\r\n            }\r\n\r\n            picker.on('change', function () {\r\n                let newValue = m($(element).timepicker('getTime'));\r\n            \r\n                if(newValue.isValid()) {\r\n                    data(newValue.format(format));\r\n                } else {\r\n                    data('');\r\n                }\r\n            });\r\n            data.subscribe(function (newTime) {\r\n                $(element).timepicker('setTime', m(newTime, format).toDate());\r\n            });\r\n        } else if (data) {\r\n            $(element).timepicker('setTime', m(data, format).toDate());\r\n        }\r\n\r\n        picker.on('showTimepicker', function() {\r\n            $('.ui-timepicker-wrapper').outerWidth($(element).outerWidth());\r\n        })\r\n\r\n    }\r\n};\r\n"]}