{"version":3,"sources":["../src/fontIcon.js"],"names":["ko","bindingHandlers","fontIcon","init","element","valueAccessor","prefix","classList","contains","add","update","iconClass","classes","previousClass","utils","domData","get","remove","set","Object","keys","forEach","key","iconClasses"],"mappings":";;;;AAAA;;AACA;;AAEAA,GAAGC,eAAH,CAAmBC,QAAnB,GAA8B;AAC1BC,UAAM,cAAUC,OAAV,EAAmBC,aAAnB,EAAkC;AACpC,YAAIC,SAAS,+BAAiB,aAAjB,KAAmC,IAAhD;;AAEA,YAAIA,UAAU,CAACF,QAAQG,SAAR,CAAkBC,QAAlB,CAA2BF,MAA3B,CAAf,EAAmD;AAC/CF,oBAAQG,SAAR,CAAkBE,GAAlB,CAAsBH,MAAtB;AACH;AACJ,KAPyB;AAQ1BI,YAAQ,gBAAUN,OAAV,EAAmBC,aAAnB,EAAkC;AACtC,YAAIC,SAAS,+BAAiB,aAAjB,KAAmC,IAAhD;AACA,YAAIK,YAAYN,eAAhB;AACA,YAAIO,UAAUR,QAAQG,SAAtB;AACA,YAAIM,sBAAJ;;AAEA,YAAI,OAAOF,SAAP,KAAqB,QAAzB,EAAmC;AAC/BA,wBAAYL,SAAS,GAAT,GAAeK,SAA3B;AACAE,4BAAgBb,GAAGc,KAAH,CAASC,OAAT,CAAiBC,GAAjB,CAAqBZ,OAArB,EAA8B,eAA9B,CAAhB;;AAEA;AACA,gBAAIS,iBAAiBA,kBAAkBF,SAAnC,IAAgDC,QAAQJ,QAAR,CAAiBK,aAAjB,CAApD,EAAqF;AACjFD,wBAAQK,MAAR,CAAeJ,aAAf;AACH;;AAED,gBAAI,CAACD,QAAQJ,QAAR,CAAiBG,SAAjB,CAAL,EAAkC;AAC9BC,wBAAQH,GAAR,CAAYE,SAAZ;AACH;;AAEDX,eAAGc,KAAH,CAASC,OAAT,CAAiBG,GAAjB,CAAqBd,OAArB,EAA8B,eAA9B,EAA+CO,SAA/C;AACH;;AAED,YAAI,QAAOA,SAAP,yCAAOA,SAAP,OAAqB,QAAzB,EAAmC;AAC/BQ,mBAAOC,IAAP,CAAYT,SAAZ,EAAuBU,OAAvB,CAA+B,UAASC,GAAT,EAAc;AACzCX,0BAAUL,SAAS,GAAT,GAAegB,GAAzB,IAAgCX,UAAUW,GAAV,CAAhC;AACA,uBAAOX,UAAUW,GAAV,CAAP;AACH,aAHD;;AAMAH,mBAAOC,IAAP,CAAYT,SAAZ,EAAuBU,OAAvB,CAA+B,UAASC,GAAT,EAAa;AACxC,oBAAIV,QAAQJ,QAAR,CAAiBc,GAAjB,KAAyB,CAAC,sBAAOC,YAAYD,GAAZ,CAAP,CAA9B,EAAwD;AACpDV,4BAAQK,MAAR,CAAeK,GAAf;AACF,iBAFF,MAEQ,IAAI,CAACV,QAAQJ,QAAR,CAAiBc,GAAjB,CAAD,IAA0B,sBAAOC,YAAYD,GAAZ,CAAP,CAA9B,EAAwD;AAC3DV,4BAAQH,GAAR,CAAYa,GAAZ;AACH;AACL,aAND;AAOH;AACJ;AA7CyB,CAA9B","file":"fontIcon.js","sourcesContent":["import { globalMetadata } from 'scalejs.metadataFactory';\r\nimport { unwrap } from 'knockout';\r\n\r\nko.bindingHandlers.fontIcon = {\r\n    init: function (element, valueAccessor) {\r\n        let prefix = globalMetadata()['font-prefix'] || 'fa';\r\n\r\n        if (prefix && !element.classList.contains(prefix)) {\r\n            element.classList.add(prefix);\r\n        }\r\n    },\r\n    update: function (element, valueAccessor) {\r\n        let prefix = globalMetadata()['font-prefix'] || 'fa';\r\n        let iconClass = valueAccessor();\r\n        let classes = element.classList;\r\n        let previousClass;\r\n\r\n        if (typeof iconClass === 'string') {\r\n            iconClass = prefix + '-' + iconClass;\r\n            previousClass = ko.utils.domData.get(element, 'previousClass');\r\n            \r\n            //check to see if a previous class was applied, has changed, and is still on element, then remove\r\n            if (previousClass && previousClass !== iconClass && classes.contains(previousClass)) {\r\n                classes.remove(previousClass);\r\n            }\r\n\r\n            if (!classes.contains(iconClass)) {\r\n                classes.add(iconClass)\r\n            }\r\n\r\n            ko.utils.domData.set(element, 'previousClass', iconClass); \r\n        }\r\n\r\n        if (typeof iconClass === 'object') {\r\n            Object.keys(iconClass).forEach(function(key) {\r\n                iconClass[prefix + '-' + key] = iconClass[key];\r\n                delete iconClass[key];\r\n            });\r\n            \r\n\r\n            Object.keys(iconClass).forEach(function(key){\r\n                if (classes.contains(key) && !unwrap(iconClasses[key])) {\r\n                    classes.remove(key);\r\n                 } else if (!classes.contains(key) && unwrap(iconClasses[key])) {\r\n                     classes.add(key);\r\n                 }\r\n            });\r\n        }\r\n    }\r\n}\r\n"]}