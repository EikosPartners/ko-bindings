{"version":3,"sources":["../src/hideOnResize.js"],"names":[],"mappings":";;AACA;;;;AACA;;;;;;AAEA;;;;;AAJA;AASI,IAAI,cAAc,KAAlB;AAAA,IACI,aADJ;;AAGA,mBAAG,eAAH,CAAmB,YAAnB,GAAkC;AAC9B,UAAM,cAAU,OAAV,EAAmB,aAAnB,EAAkC;AACpC,YAAI,UAAU,gBAAgB,OAA9B;AAAA,YACI,OAAO,gBAAgB,IAD3B;;AAGA,YAAI,aAAJ,EAAmB;AACf,kCAAE,MAAF,EAAU,MAAV,CAAiB,QAAjB,EAA0B,aAA1B;AACH;;AAED,wBAAgB,UAAhB;;AAEA,8BAAE,MAAF,EAAU,MAAV,CAAiB,UAAjB;;AAEA;;AAEA,2BAAG,KAAH,CAAS,eAAT,CAAyB,kBAAzB,CAA4C,OAA5C,EAAqD,YAAW;AAC5D,kCAAE,MAAF,EAAU,MAAV,CAAiB,QAAjB,EAA2B,UAA3B;AACH,SAFD;;AAIA,iBAAS,UAAT,GAAsB;AAClB,gBAAG,sBAAE,OAAF,EAAW,KAAX,KAAsB,sBAAE,MAAF,EAAU,KAAV,KAAmB,EAA5C,EAAiD;AAC7C;;AAEA,oBAAI,WAAW,sBAAE,OAAF,EAAW,QAAX,GAAsB,GAAtB,EAAf;AACA,yBAAS,OAAT;AACA,yBAAS,MAAT,CAAgB,UAAU,KAAV,EAAiB,OAAjB,EAA0B,CAA1B,EAA6B;AACzC,wBAAI,aAAa,QAAQ,sBAAE,OAAF,EAAW,UAAX,EAAzB;AACA;AACA,wBAAG,cAAc,sBAAE,MAAF,EAAU,KAAV,KAAoB,GAArC,EAA0C;AACtC,4BAAI,WAAW,QAAQ,MAAR,CAAe,QAAQ,MAAR,GAAiB,CAAjB,GAAqB,CAApC,EAAuC,CAAvC,CAAf;AACA,6BAAK,CAAC,UAAU,EAAX,EAAe,MAAf,CAAsB,QAAtB,CAAL;AACA,+BAAO,KAAP;AACH;AACD,2BAAO,UAAP;AACH,iBATD,EASG,CATH;AAWH,aAhBD,MAgBO;AACH;AACA,oBAAI,OAAO,MAAX,EAAmB;AACf,2BAAO,OAAP;AACA,4BAAS,KAAK,MAAL,CAAY,CAAZ,EAAe,OAAO,MAAtB,EAA8B,MAA9B,CAAqC,SAArC,CAAT;AACA;AACH;AACJ;AACJ;AAEJ;AA9C6B,CAAlC","file":"hideOnResize.js","sourcesContent":["/*global define */\r\nimport ko from 'knockout';\r\nimport $ from 'jquery';\r\n\r\n/**\r\n * TODO - description\r\n * @module hideOnResize\r\n */\r\n\r\n    var initialized = false,\r\n        resizeHandler;\r\n\r\n    ko.bindingHandlers.hideOnResize = {\r\n        init: function (element, valueAccessor) {\r\n            var actions = valueAccessor().actions,\r\n                more = valueAccessor().more;\r\n\r\n            if (resizeHandler) {\r\n                $(window).unbind('resize',resizeHandler);\r\n            }\r\n\r\n            resizeHandler = checkWidth;\r\n\r\n            $(window).resize(checkWidth)\r\n\r\n            checkWidth();\r\n\r\n            ko.utils.domNodeDisposal.addDisposeCallback(element, function() {\r\n                $(window).unbind('resize', checkWidth);\r\n            });\r\n\r\n            function checkWidth() {\r\n                if($(element).width() > ($(window).width()- 80)) {\r\n                    //console.log('too big');\r\n\r\n                    var children = $(element).children().get();\r\n                    children.reverse()\r\n                    children.reduce(function (width, element, i) {\r\n                        var totalWidth = width + $(element).outerWidth();\r\n                        //console.log('Calculating space:', totalWidth, $(window).width());\r\n                        if(totalWidth >= $(window).width() - 200) {\r\n                            var leftover = actions.splice(actions.length - i - 1, 1);\r\n                            more((more() || []).concat(leftover));\r\n                            return width;\r\n                        }\r\n                        return totalWidth;\r\n                    }, 0)\r\n\r\n                } else {\r\n                    //console.log('good');\r\n                    if (more().length) {\r\n                        more().reverse();\r\n                        actions((more.splice(0, more().length).concat(actions())));\r\n                        checkWidth();\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n    };\r\n"]}