{"version":3,"sources":["../src/floatValue.js"],"names":["bindingHandlers","floatValue","init","element","valueAccessor","input","isObservable","console","warn","onChange","log","value","valueArray","split","map","zone","index","length","parseFloat","i","item","observable","push","addEventListener","utils","domNodeDisposal","addDisposeCallback","removeEventListener","update","zones","zoneString","join"],"mappings":";;AAAA;;;;;;AAEA;;;;;AAKI,mBAAGA,eAAH,CAAmBC,UAAnB,GAAgC;AAC5BC,UAAM,cAAUC,OAAV,EAAmBC,aAAnB,EAAiC;AACnC,YAAIC,QAAQD,eAAZ;;AAEA;AACA,YAAG,CAAC,mBAAGE,YAAH,CAAgBD,KAAhB,CAAJ,EAA4B;AACxBE,oBAAQC,IAAR,CAAa,4BAAb;AACA;AACH;;AAED;AACA,iBAASC,QAAT,GAAqB;AACjBF,oBAAQG,GAAR,CAAY,aAAZ,EAA2BP,QAAQQ,KAAnC;AACA,gBAAIC,aAAaT,QAAQQ,KAAR,CAAcE,KAAd,CAAoB,GAApB,CAAjB;;AAEAR,oBAAQS,GAAR,CAAY,UAAUC,IAAV,EAAgBC,KAAhB,EAAsB;AAC9B,oBAAIA,QAAQJ,WAAWK,MAAnB,IAA6BC,WAAWN,WAAWI,KAAX,CAAX,IAAgC,CAAhC,KAAsC,CAAvE,EAAyE;AACrED,yBAAKJ,KAAL,CAAWO,WAAWN,WAAWI,KAAX,CAAX,CAAX;AACH,iBAFD,MAEO;AACHD,yBAAKJ,KAAL,CAAWO,WAAWN,WAAWI,QAAQ,CAAnB,CAAX,CAAX;AACH;AACJ,aAND;;AAQA,gBAAIJ,WAAWK,MAAX,GAAoBZ,QAAQY,MAAhC,EAAuC;AACnC,qBAAK,IAAIE,IAAId,QAAQY,MAArB,EAA6BE,IAAIP,WAAWK,MAA5C,EAAoDE,GAApD,EAAwD;AACpD,wBAAID,WAAWN,WAAWO,CAAX,CAAX,IAA4B,CAA5B,KAAkC,CAAtC,EAAyC;AACrC,4BAAIC,OAAO;AACPT,mCAAO,mBAAGU,UAAH,CAAcH,WAAWN,WAAWO,CAAX,CAAX,CAAd;AADA,yBAAX;AAGAd,8BAAMiB,IAAN,CAAWF,IAAX;AACAb,gCAAQG,GAAR,CAAYU,KAAKT,KAAjB,EAAwB,GAAxB,EAA6BN,OAA7B;AACH;AACJ;AACJ;AACJ;AACDF,gBAAQoB,gBAAR,CAAyB,QAAzB,EAAmCd,QAAnC;;AAEA;AACA,2BAAGe,KAAH,CAASC,eAAT,CAAyBC,kBAAzB,CAA4CvB,OAA5C,EAAqD,YAAW;AAC5DA,oBAAQwB,mBAAR,CAA4B,QAA5B,EAAsClB,QAAtC;AACH,SAFD;AAGH,KAzC2B;AA0C5BmB,YAAQ,gBAAUzB,OAAV,EAAmBC,aAAnB,EAAiC;AACrC,YAAIC,QAAQD,eAAZ;AACA,YAAIyB,QAAQxB,QAAQS,GAAR,CAAY,UAASC,IAAT,EAAc;AAClC,mBAAOA,KAAKJ,KAAL,EAAP;AACH,SAFW,CAAZ;AAGA,YAAImB,aAAaD,MAAME,IAAN,CAAW,GAAX,CAAjB;;AAEA;AACA5B,gBAAQQ,KAAR,GAAgBmB,UAAhB;AACH;AAnD2B,CAAhC","file":"floatValue.js","sourcesContent":["import ko from 'knockout';\n\n/**\n * TODO - description\n * @module floatValue\n */\n\n    ko.bindingHandlers.floatValue = {\n        init: function (element, valueAccessor){\n            var input = valueAccessor();\n\n            // if input is not an observable, throw warning\n            if(!ko.isObservable(input)) {\n                console.warn('Input is not an observable');\n                return;\n            }\n\n            // handles user input and updates input observable\n            function onChange () {\n                console.log('New value: ', element.value);\n                var valueArray = element.value.split(',');\n\n                input().map(function (zone, index){\n                    if (index < valueArray.length && parseFloat(valueArray[index]) % 1 === 0){\n                        zone.value(parseFloat(valueArray[index]));\n                    } else {\n                        zone.value(parseFloat(valueArray[index - 1]));\n                    }\n                });\n\n                if (valueArray.length > input().length){\n                    for (var i = input().length; i < valueArray.length; i++){\n                        if (parseFloat(valueArray[i]) % 1 === 0) {\n                            var item = {\n                                value: ko.observable(parseFloat(valueArray[i]))\n                            };\n                            input.push(item);\n                            console.log(item.value, \":\", input());\n                        }\n                    }\n                }\n            }\n            element.addEventListener('change', onChange);\n\n            // on dom node disposal, removes the onChange listener\n            ko.utils.domNodeDisposal.addDisposeCallback(element, function() {\n                element.removeEventListener('change', onChange);\n            });\n        },\n        update: function (element, valueAccessor){\n            var input = valueAccessor()\n            var zones = input().map(function(zone){\n                return zone.value();\n            });\n            var zoneString = zones.join(',');\n\n            // sets the value of the element to be the value of input\n            element.value = zoneString;\n        }\n    }\n"]}