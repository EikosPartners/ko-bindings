{"version":3,"sources":["../src/hideOnResize.js"],"names":["initialized","resizeHandler","bindingHandlers","hideOnResize","init","element","valueAccessor","actions","more","window","unbind","checkWidth","resize","utils","domNodeDisposal","addDisposeCallback","width","children","get","reverse","reduce","i","totalWidth","outerWidth","leftover","splice","length","concat"],"mappings":";;AACA;;;;AACA;;;;;;AAEA;;;;;AAJA;AASI,IAAIA,cAAc,KAAlB;AAAA,IACIC,aADJ;;AAGA,mBAAGC,eAAH,CAAmBC,YAAnB,GAAkC;AAC9BC,UAAM,cAAUC,OAAV,EAAmBC,aAAnB,EAAkC;AACpC,YAAIC,UAAUD,gBAAgBC,OAA9B;AAAA,YACIC,OAAOF,gBAAgBE,IAD3B;;AAGA,YAAIP,aAAJ,EAAmB;AACf,kCAAEQ,MAAF,EAAUC,MAAV,CAAiB,QAAjB,EAA0BT,aAA1B;AACH;;AAEDA,wBAAgBU,UAAhB;;AAEA,8BAAEF,MAAF,EAAUG,MAAV,CAAiBD,UAAjB;;AAEAA;;AAEA,2BAAGE,KAAH,CAASC,eAAT,CAAyBC,kBAAzB,CAA4CV,OAA5C,EAAqD,YAAW;AAC5D,kCAAEI,MAAF,EAAUC,MAAV,CAAiB,QAAjB,EAA2BC,UAA3B;AACH,SAFD;;AAIA,iBAASA,UAAT,GAAsB;AAClB,gBAAG,sBAAEN,OAAF,EAAWW,KAAX,KAAsB,sBAAEP,MAAF,EAAUO,KAAV,KAAmB,EAA5C,EAAiD;AAC7C;;AAEA,oBAAIC,WAAW,sBAAEZ,OAAF,EAAWY,QAAX,GAAsBC,GAAtB,EAAf;AACAD,yBAASE,OAAT;AACAF,yBAASG,MAAT,CAAgB,UAAUJ,KAAV,EAAiBX,OAAjB,EAA0BgB,CAA1B,EAA6B;AACzC,wBAAIC,aAAaN,QAAQ,sBAAEX,OAAF,EAAWkB,UAAX,EAAzB;AACA;AACA,wBAAGD,cAAc,sBAAEb,MAAF,EAAUO,KAAV,KAAoB,GAArC,EAA0C;AACtC,4BAAIQ,WAAWjB,QAAQkB,MAAR,CAAelB,QAAQmB,MAAR,GAAiBL,CAAjB,GAAqB,CAApC,EAAuC,CAAvC,CAAf;AACAb,6BAAK,CAACA,UAAU,EAAX,EAAemB,MAAf,CAAsBH,QAAtB,CAAL;AACA,+BAAOR,KAAP;AACH;AACD,2BAAOM,UAAP;AACH,iBATD,EASG,CATH;AAWH,aAhBD,MAgBO;AACH;AACA,oBAAId,OAAOkB,MAAX,EAAmB;AACflB,2BAAOW,OAAP;AACAZ,4BAASC,KAAKiB,MAAL,CAAY,CAAZ,EAAejB,OAAOkB,MAAtB,EAA8BC,MAA9B,CAAqCpB,SAArC,CAAT;AACAI;AACH;AACJ;AACJ;AAEJ;AA9C6B,CAAlC","file":"hideOnResize.js","sourcesContent":["/*global define */\nimport ko from 'knockout';\nimport $ from 'jquery';\n\n/**\n * TODO - description\n * @module hideOnResize\n */\n\n    var initialized = false,\n        resizeHandler;\n\n    ko.bindingHandlers.hideOnResize = {\n        init: function (element, valueAccessor) {\n            var actions = valueAccessor().actions,\n                more = valueAccessor().more;\n\n            if (resizeHandler) {\n                $(window).unbind('resize',resizeHandler);\n            }\n\n            resizeHandler = checkWidth;\n\n            $(window).resize(checkWidth)\n\n            checkWidth();\n\n            ko.utils.domNodeDisposal.addDisposeCallback(element, function() {\n                $(window).unbind('resize', checkWidth);\n            });\n\n            function checkWidth() {\n                if($(element).width() > ($(window).width()- 80)) {\n                    //console.log('too big');\n\n                    var children = $(element).children().get();\n                    children.reverse()\n                    children.reduce(function (width, element, i) {\n                        var totalWidth = width + $(element).outerWidth();\n                        //console.log('Calculating space:', totalWidth, $(window).width());\n                        if(totalWidth >= $(window).width() - 200) {\n                            var leftover = actions.splice(actions.length - i - 1, 1);\n                            more((more() || []).concat(leftover));\n                            return width;\n                        }\n                        return totalWidth;\n                    }, 0)\n\n                } else {\n                    //console.log('good');\n                    if (more().length) {\n                        more().reverse();\n                        actions((more.splice(0, more().length).concat(actions())));\n                        checkWidth();\n                    }\n                }\n            }\n\n        }\n    };\n"]}