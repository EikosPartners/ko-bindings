{"version":3,"sources":["../src/hideOnResize.js"],"names":["initialized","resizeHandler","bindingHandlers","hideOnResize","init","element","valueAccessor","actions","more","window","unbind","checkWidth","resize","utils","domNodeDisposal","addDisposeCallback","width","children","get","reverse","reduce","i","totalWidth","outerWidth","leftover","splice","length","concat"],"mappings":";;AACA;;;;AACA;;;;;;AAEA;;;;;AAJA;AASI,IAAIA,cAAc,KAAlB;AAAA,IACIC,aADJ;;AAGA,mBAAGC,eAAH,CAAmBC,YAAnB,GAAkC;AAC9BC,UAAM,cAAUC,OAAV,EAAmBC,aAAnB,EAAkC;AACpC,YAAIC,UAAUD,gBAAgBC,OAA9B;AAAA,YACIC,OAAOF,gBAAgBE,IAD3B;;AAGA,YAAIP,aAAJ,EAAmB;AACf,kCAAEQ,MAAF,EAAUC,MAAV,CAAiB,QAAjB,EAA0BT,aAA1B;AACH;;AAEDA,wBAAgBU,UAAhB;;AAEA,8BAAEF,MAAF,EAAUG,MAAV,CAAiBD,UAAjB;;AAEAA;;AAEA,2BAAGE,KAAH,CAASC,eAAT,CAAyBC,kBAAzB,CAA4CV,OAA5C,EAAqD,YAAW;AAC5D,kCAAEI,MAAF,EAAUC,MAAV,CAAiB,QAAjB,EAA2BC,UAA3B;AACH,SAFD;;AAIA,iBAASA,UAAT,GAAsB;AAClB,gBAAG,sBAAEN,OAAF,EAAWW,KAAX,KAAsB,sBAAEP,MAAF,EAAUO,KAAV,KAAmB,EAA5C,EAAiD;AAC7C;;AAEA,oBAAIC,WAAW,sBAAEZ,OAAF,EAAWY,QAAX,GAAsBC,GAAtB,EAAf;AACAD,yBAASE,OAAT;AACAF,yBAASG,MAAT,CAAgB,UAAUJ,KAAV,EAAiBX,OAAjB,EAA0BgB,CAA1B,EAA6B;AACzC,wBAAIC,aAAaN,QAAQ,sBAAEX,OAAF,EAAWkB,UAAX,EAAzB;AACA;AACA,wBAAGD,cAAc,sBAAEb,MAAF,EAAUO,KAAV,KAAoB,GAArC,EAA0C;AACtC,4BAAIQ,WAAWjB,QAAQkB,MAAR,CAAelB,QAAQmB,MAAR,GAAiBL,CAAjB,GAAqB,CAApC,EAAuC,CAAvC,CAAf;AACAb,6BAAK,CAACA,UAAU,EAAX,EAAemB,MAAf,CAAsBH,QAAtB,CAAL;AACA,+BAAOR,KAAP;AACH;AACD,2BAAOM,UAAP;AACH,iBATD,EASG,CATH;AAWH,aAhBD,MAgBO;AACH;AACA,oBAAId,OAAOkB,MAAX,EAAmB;AACflB,2BAAOW,OAAP;AACAZ,4BAASC,KAAKiB,MAAL,CAAY,CAAZ,EAAejB,OAAOkB,MAAtB,EAA8BC,MAA9B,CAAqCpB,SAArC,CAAT;AACAI;AACH;AACJ;AACJ;AAEJ;AA9C6B,CAAlC","file":"hideOnResize.js","sourcesContent":["/*global define */\r\nimport ko from 'knockout';\r\nimport $ from 'jquery';\r\n\r\n/**\r\n * TODO - description\r\n * @module hideOnResize\r\n */\r\n\r\n    var initialized = false,\r\n        resizeHandler;\r\n\r\n    ko.bindingHandlers.hideOnResize = {\r\n        init: function (element, valueAccessor) {\r\n            var actions = valueAccessor().actions,\r\n                more = valueAccessor().more;\r\n\r\n            if (resizeHandler) {\r\n                $(window).unbind('resize',resizeHandler);\r\n            }\r\n\r\n            resizeHandler = checkWidth;\r\n\r\n            $(window).resize(checkWidth)\r\n\r\n            checkWidth();\r\n\r\n            ko.utils.domNodeDisposal.addDisposeCallback(element, function() {\r\n                $(window).unbind('resize', checkWidth);\r\n            });\r\n\r\n            function checkWidth() {\r\n                if($(element).width() > ($(window).width()- 80)) {\r\n                    //console.log('too big');\r\n\r\n                    var children = $(element).children().get();\r\n                    children.reverse()\r\n                    children.reduce(function (width, element, i) {\r\n                        var totalWidth = width + $(element).outerWidth();\r\n                        //console.log('Calculating space:', totalWidth, $(window).width());\r\n                        if(totalWidth >= $(window).width() - 200) {\r\n                            var leftover = actions.splice(actions.length - i - 1, 1);\r\n                            more((more() || []).concat(leftover));\r\n                            return width;\r\n                        }\r\n                        return totalWidth;\r\n                    }, 0)\r\n\r\n                } else {\r\n                    //console.log('good');\r\n                    if (more().length) {\r\n                        more().reverse();\r\n                        actions((more.splice(0, more().length).concat(actions())));\r\n                        checkWidth();\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n    };\r\n"]}