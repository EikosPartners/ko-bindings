{"version":3,"sources":["../src/timepicker.js"],"names":["bindingHandlers","timepicker","init","element","valueAccessor","options","data","format","picker","m","time","utc","isObservable","toDate","on","newValue","isValid","subscribe","newTime","outerWidth"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEA,mBAAGA,eAAH,CAAmBC,UAAnB,GAAgC;AAC5BC,UAAM,cAAUC,OAAV,EAAmBC,aAAnB,EAAkC;AACpC,YAAMC,UAAUD,eAAhB;AACA,YAAME,OAAOD,QAAQC,IAArB;AACA,YAAMC,SAASF,QAAQE,MAAR,IAAkB,EAAjC;AACA,YAAMC,SAAS,sBAAEL,OAAF,EAAWF,UAAX,CAAsBI,OAAtB,CAAf;AACA,YAAII,oBAAJ;AAAA,YACIC,aADJ;;AAIA,YAAIL,QAAQM,GAAZ,EAAiB;AACbF,gBAAIA,EAAEE,GAAN;AACH;;AAED,YAAI,mBAAGC,YAAH,CAAgBN,IAAhB,CAAJ,EAA2B;AACvB;AACA,gBAAIA,MAAJ,EAAY;AACR,sCAAEH,OAAF,EAAWF,UAAX,CAAsB,SAAtB,EAAiCQ,EAAEH,MAAF,EAAUC,MAAV,EAAkBM,MAAlB,EAAjC;AACH,aAFD,MAEO;AACHH,uBAAO,sBAAEP,OAAF,EAAWF,UAAX,CAAsB,SAAtB,CAAP,CADG,CACsC;AACzC,oBAAIS,IAAJ,EAAU;AACNJ,yBAAKG,EAAEC,IAAF,EAAQH,MAAR,CAAeA,MAAf,CAAL;AACH;AACJ;;AAEDC,mBAAOM,EAAP,CAAU,QAAV,EAAoB,YAAY;AAC5B,oBAAIC,WAAWN,EAAE,sBAAEN,OAAF,EAAWF,UAAX,CAAsB,SAAtB,CAAF,CAAf;;AAEA,oBAAGc,SAASC,OAAT,EAAH,EAAuB;AACnBV,yBAAKS,SAASR,MAAT,CAAgBA,MAAhB,CAAL;AACH,iBAFD,MAEO;AACHD,yBAAK,EAAL;AACH;AACJ,aARD;AASAA,iBAAKW,SAAL,CAAe,UAAUC,OAAV,EAAmB;AAC9B,sCAAEf,OAAF,EAAWF,UAAX,CAAsB,SAAtB,EAAiCQ,EAAES,OAAF,EAAWX,MAAX,EAAmBM,MAAnB,EAAjC;AACH,aAFD;AAGH,SAvBD,MAuBO,IAAIP,IAAJ,EAAU;AACb,kCAAEH,OAAF,EAAWF,UAAX,CAAsB,SAAtB,EAAiCQ,EAAEH,IAAF,EAAQC,MAAR,EAAgBM,MAAhB,EAAjC;AACH;;AAEDL,eAAOM,EAAP,CAAU,gBAAV,EAA4B,YAAW;AACnC,kCAAE,wBAAF,EAA4BK,UAA5B,CAAuC,sBAAEhB,OAAF,EAAWgB,UAAX,EAAvC;AACH,SAFD;AAIH;AA7C2B,CAAhC","file":"timepicker.js","sourcesContent":["import ko from 'knockout';\nimport $ from 'jquery';\nimport moment from 'moment';\nimport 'timepicker';\nimport 'timepicker/jquery.timepicker.min.css';\n\nko.bindingHandlers.timepicker = {\n    init: function (element, valueAccessor) {\n        const options = valueAccessor();\n        const data = options.data;\n        const format = options.format || '';\n        const picker = $(element).timepicker(options);\n        let m = moment,\n            time;\n\n\n        if (options.utc) {\n            m = m.utc;\n        }\n\n        if (ko.isObservable(data)) {\n            //set initial values\n            if (data()) {\n                $(element).timepicker('setTime', m(data(), format).toDate());\n            } else {\n                time = $(element).timepicker('getTime'); // Does this ever return a value?\n                if (time) {\n                    data(m(time).format(format));\n                }\n            }\n\n            picker.on('change', function () {\n                let newValue = m($(element).timepicker('getTime'));\n            \n                if(newValue.isValid()) {\n                    data(newValue.format(format));\n                } else {\n                    data('');\n                }\n            });\n            data.subscribe(function (newTime) {\n                $(element).timepicker('setTime', m(newTime, format).toDate());\n            });\n        } else if (data) {\n            $(element).timepicker('setTime', m(data, format).toDate());\n        }\n\n        picker.on('showTimepicker', function() {\n            $('.ui-timepicker-wrapper').outerWidth($(element).outerWidth());\n        })\n\n    }\n};\n"]}